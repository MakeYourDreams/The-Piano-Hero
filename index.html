<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset=utf-8>
	<meta name="viewport" content="width=620">
	<title>HTML5 Demo: File API</title>
	<link rel="stylesheet" href="main.css">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab&display=swap" rel="stylesheet">
	<script src="https://unpkg.com/tone@latest/build/Tone.js"></script>
	<script src="./scripts/dragdrop.js"></script>
	<script src="./scripts/component.js"></script>
	<script src="./scripts/obstacle.js"></script>
	<script src="./scripts/player.js"></script>	
	<script src="./scripts/game.js"></script>
	<script src="./scripts/script.js"></script>
	<script src="./scripts/SMFreader.js"></script>
	<script src="./scripts/defaultsong.js"></script>
</head>
<body>
	<section id="wrapper">
		<header>
			<h1>Standard MIDI File Reader</h1>
		</header>

		<script type="text/javascript">
			var synth = new Tone.Sampler({
				"A0" : "A0.[mp3|ogg]",
				"C1" : "C1.[mp3|ogg]",
				"D#1" : "Ds1.[mp3|ogg]",
				"F#1" : "Fs1.[mp3|ogg]",
				"A1" : "A1.[mp3|ogg]",
				"C2" : "C2.[mp3|ogg]",
				"D#2" : "Ds2.[mp3|ogg]",
				"F#2" : "Fs2.[mp3|ogg]",
				"A2" : "A2.[mp3|ogg]",
				"C3" : "C3.[mp3|ogg]",
				"D#3" : "Ds3.[mp3|ogg]",
				"F#3" : "Fs3.[mp3|ogg]",
				"A3" : "A3.[mp3|ogg]",
				"C4" : "C4.[mp3|ogg]",
				"D#4" : "Ds4.[mp3|ogg]",
				"F#4" : "Fs4.[mp3|ogg]",
				"A4" : "A4.[mp3|ogg]",
				"C5" : "C5.[mp3|ogg]",
				"D#5" : "Ds5.[mp3|ogg]",
				"F#5" : "Fs5.[mp3|ogg]",
				"A5" : "A5.[mp3|ogg]",
				"C6" : "C6.[mp3|ogg]",
				"D#6" : "Ds6.[mp3|ogg]",
				"F#6" : "Fs6.[mp3|ogg]",
				"A6" : "A6.[mp3|ogg]",
				"C7" : "C7.[mp3|ogg]",
				"D#7" : "Ds7.[mp3|ogg]",
				"F#7" : "Fs7.[mp3|ogg]",
				"A7" : "A7.[mp3|ogg]",
				"C8" : "C8.[mp3|ogg]"
			}, {
				"release" : 1,
				"baseUrl" : "./audio/salamander/"
			}).toMaster();
		</script>

		<input type='file' accept='.MID' onchange='openFile(event)'><br>
		<img id='output'>
		
		<script>
		  var openFile = function(event) {
			  
			var input = event.target;
		
						reader = new FileReader();
						reader.onload = function (event) {
						decodeSMF(event.target.result);
						};
						reader.onerror = function (event) {
						alert("Error: " + reader.error );
						};
						reader.readAsArrayBuffer(input.files[0]);
						return false;
			
		  };
		</script>
		

		<article>
			<center>
				<div id="menu-overlay">
					<div id="menu-buttons">
					<a id="playButton" href="#" class="myButton">Play</a>
					<br>
					<a href="#" class="myButton">Settings</a>
					<br>
					<a href="#" class="myButton">Demo Mode</a>
					<!-- Button Fiddler, The Conductor -->
				</div>
				<div id="menu-buttons-play" style="display: none;">
						<a href="#" class="myButton">Play2</a>
						<br>
						<a href="#" class="myButton">Settings</a>
						<br>
						<a href="#" class="myButton">Demo Mode</a>
				</div>


				</div>
				
				<div class="lines">
						<div class="line"></div>
						<div class="line"></div>
						<div class="line"></div>
						<div class="line"></div>
						<div class="line"></div>
						<div class="line"></div>
						<div class="line"></div>
						<div class="line"></div>
					  </div>


					  <script type="text/javascript">
						var button = document.getElementById('playButton')
						button.addEventListener('click',hideshow,false);
					
						function hideshow() {
							document.getElementById('menu-buttons').style.display = 'none'; 
							document.getElementById('menu-buttons-play').style.display = 'block'; 
						}   
					</script>		  
					  
			<div id="game-board">
				<canvas id="canvas" width="820" height="570"></canvas>
			</div>
		</center>
		<ul id="piano">
				<li id="n1" class="key">
					<kbd>1</kbd>
				</li>
				<li id="n2" class="key">
					<kbd>2</kbd>
				</li>
				<li id="n3" class="key">
				  <kbd>3</kbd>
				</li>
				<li id="n4" class="key">
					<kbd>Space</kbd> 
				</li>
				<li id="n5" class="key">
					<kbd>←</kbd> 
				</li>
				<li id="n6" class="key">
					<kbd>↑</kbd> 
				</li>
				<li id="n7" class="key">
					<kbd>→</kbd> 
				</li>
			  </ul>
			<div id="holder"></div> 
			<p id="status">File API &amp; FileReader API not supported</p>
			<p>Drag a MIDI file from your desktop on to the drop zone above to see the browser read the contents of the file without uploading the file to any servers.</p>

			<p id="updates">updates here</p>
		</article>
	</section>
</body>
</html>
